{
  "contents": [
    {
      "role": "user",
      "parts": [
        {
          "text": "=== (CONTEXT) ===\nTest data generator for Flutter form validation.\n\n=== (TARGET) ===\nQA engineers need realistic test data for happy path and errors.\n\n=== (OBJECTIVE) ===\n1. Analyze constraints (maxLength, inputFormatters, validatorRules)\n2. FILTER OUT isEmpty/null rules (tested separately)\n3. Generate valid/invalid pairs ONLY for non-empty rules\n4. CRITICAL: Invalid values MUST pass inputFormatters but FAIL validators\n5. Output valid JSON\n\n=== (EXECUTION) ===\n1. For each field, count ALL non-empty rules (SKIP ONLY \"isEmpty\"/\"== null\")\n2. Count EVERY rule even if duplicate → Let N = total non-empty rule count\n3. For each non-empty rule, generate 1 valid + 1 invalid pair\n4. CRITICAL: Create N pairs (total N valid + N invalid)\n5. Output format: {\"file\":\"<filename>\",\"datasets\":{\"byKey\":{\"<key>\":[...pairs...]}}}\n6. Each pair: {\"valid\":\"...\",\"invalid\":\"...\",\"invalidRuleMessages\":\"rule message\"}\n\nExample 1 (N=1):\nInput: {\"file\":\"lib/page.dart\",\"fields\":[{\"key\":\"firstname\",\"validatorRules\":[\n  {\"condition\":\"value == null || value.isEmpty\",\"message\":\"Required\"},\n  {\"condition\":\"!RegExp(r'^[a-zA-Z]{2,}$').hasMatch(value)\",\"message\":\"Min 2\"}]}]}\nNon-empty rules: 1 (SKIP isEmpty) → N=1 pair\nOutput: {\"file\":\"lib/page.dart\",\"datasets\":{\"byKey\":{\"firstname\":[\n  {\"valid\":\"Alice\",\"invalid\":\"J\",\"invalidRuleMessages\":\"Min 2\"}\n]}}}\n\nExample 2 (N=3 with duplicate):\nInput: {\"file\":\"lib/page.dart\",\"fields\":[{\"key\":\"phone\",\"validatorRules\":[\n  {\"condition\":\"value == null || value.isEmpty\",\"message\":\"Required\"},\n  {\"condition\":\"!RegExp(r'^\\\\d{10}$').hasMatch(value)\",\"message\":\"10 digits\"},\n  {\"condition\":\"!value.startsWith('0')\",\"message\":\"Starts with 0\"},\n  {\"condition\":\"!RegExp(r'^\\\\d{10}$').hasMatch(value)\",\"message\":\"Duplicate\"}]}]}\nNon-empty rules: 3 (SKIP isEmpty, COUNT all) → N=3 pairs\nOutput: {\"file\":\"lib/page.dart\",\"datasets\":{\"byKey\":{\"phone\":[\n  {\"valid\":\"0123456789\",\"invalid\":\"012345678\",\"invalidRuleMessages\":\"10 digits\"},\n  {\"valid\":\"0987654321\",\"invalid\":\"1234567890\",\"invalidRuleMessages\":\"Starts with 0\"},\n  {\"valid\":\"0555123456\",\"invalid\":\"012\",\"invalidRuleMessages\":\"Duplicate\"}\n]}}}\n\n=== (STYLE) ===\n- JSON only (no markdown, no comments)\n- Realistic values (not \"value1\")\n- String arrays only\n- Remember: invalid data MUST be typeable (respect inputFormatters)"
        },
        {
          "text": "Input Data (JSON):\n{\"file\":\"lib/demos/example_page.dart\",\"fields\":[{\"key\":\"firstname_textfield\",\"meta\":{\"maxLength\":50,\"inputFormatters\":[{\"type\":\"allow\",\"pattern\":\"[a-zA-Z]\"},{\"type\":\"lengthLimit\",\"max\":50}],\"validatorRules\":[{\"condition\":\"value == null || value.isEmpty\",\"message\":\"First name is required\"},{\"condition\":\"!RegExp(r'^[a-zA-Z]{2,}$').hasMatch(value)\",\"message\":\"Min 2 letters\"}]}},{\"key\":\"phone_textfield\",\"meta\":{\"inputFormatters\":[{\"type\":\"digitsOnly\"},{\"type\":\"lengthLimit\",\"max\":10}],\"validatorRules\":[{\"condition\":\"value == null || value.isEmpty\",\"message\":\"Phone is required\"},{\"condition\":\"!RegExp(r'^\\\\d{10}$').hasMatch(value)\",\"message\":\"Must be 10 digits\"},{\"condition\":\"!value.startsWith('0')\",\"message\":\"Must start with 0\"}]}}]}"
        }
      ]
    }
  ]
}
