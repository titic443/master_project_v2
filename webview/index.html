<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flutter Test Generator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Flutter Test Generator</h1>
            <p class="subtitle">Generate widget tests using pairwise combinatorial testing</p>
        </header>

        <main>
            <!-- Step 1: Input File Selection -->
            <section class="form-section">
                <div class="section-header">
                    <span class="step-badge">1</span>
                    <h2>Select Input File</h2>
                </div>
                <div class="input-group">
                    <input type="text" id="inputFile" placeholder="Select a Dart UI file..." readonly>
                    <button type="button" id="browseInputBtn" class="btn-secondary">Browse...</button>
                </div>
                <div id="widgetInfo" class="info-box hidden">
                    <span class="icon">&#10003;</span>
                    <span id="widgetCount"></span>
                </div>
            </section>

            <!-- Step 2: PICT Constraints (Optional) -->
            <section class="form-section">
                <div class="section-header">
                    <span class="step-badge">2</span>
                    <h2>PICT Constraints</h2>
                    <span class="optional-badge">Optional</span>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="useConstraints">
                    <label for="useConstraints">Use custom constraints</label>
                </div>
                <div id="constraintsPanel" class="constraints-panel hidden">
                    <textarea id="constraintsText" class="constraints-textarea" readonly placeholder="# Constraints will be loaded from file...
# Example syntax:
# IF [submitButton] = &quot;enabled&quot; THEN [username] &lt;&gt; &quot;empty&quot;;
# IF [dropdown] = &quot;option1&quot; THEN [checkbox] = &quot;checked&quot;;">
# Example constraints (read-only):
# IF [submitButton] = "enabled" THEN [username] <> "empty";
# IF [dropdown] = "option1" THEN [checkbox] = "checked";</textarea>
                    <div class="constraints-actions">
                        <button type="button" id="loadConstraintsBtn" class="btn-secondary btn-small">
                            <span class="btn-icon">&#128196;</span>
                            Load from file...
                        </button>
                        <a href="https://github.com/microsoft/pict/blob/main/doc/pict.md#constraints" target="_blank" class="btn-link btn-small">
                            <span class="btn-icon">&#128214;</span>
                            Constraint syntax
                        </a>
                    </div>
                </div>
            </section>

            <!-- Step 3: Output File Selection -->
            <section class="form-section">
                <div class="section-header">
                    <span class="step-badge">3</span>
                    <h2>Select Output Test Script</h2>
                </div>
                <div class="input-group">
                    <input type="text" id="outputFile" placeholder="Select output location..." readonly>
                    <button type="button" id="browseOutputBtn" class="btn-secondary">Browse...</button>
                </div>
                <p class="input-hint">Choose where to save the generated test script</p>
            </section>

            <!-- Step 4: Actions -->
            <section class="form-section">
                <div class="section-header">
                    <span class="step-badge">4</span>
                    <h2>Actions</h2>
                </div>
                <div class="action-buttons">
                    <button type="button" id="generateBtn" class="btn-primary btn-action" disabled>
                        <span class="btn-icon">&#9881;</span>
                        <span class="btn-text">Generate Test Script</span>
                    </button>
                    <button type="button" id="runCoverageBtn" class="btn-secondary btn-action" disabled>
                        <span class="btn-icon">&#9733;</span>
                        <span class="btn-text">Run Coverage Test</span>
                    </button>
                </div>
            </section>

            <!-- Progress -->
            <section id="progressSection" class="form-section hidden">
                <div class="section-header">
                    <h2>Progress</h2>
                </div>
                <div class="progress-list">
                    <div class="progress-item" data-step="1">
                        <span class="progress-icon">&#9675;</span>
                        <span class="progress-label">Extract UI manifest</span>
                        <span class="progress-status"></span>
                    </div>
                    <div class="progress-item" data-step="2">
                        <span class="progress-icon">&#9675;</span>
                        <span class="progress-label">Generate datasets (AI)</span>
                        <span class="progress-status"></span>
                    </div>
                    <div class="progress-item" data-step="3">
                        <span class="progress-icon">&#9675;</span>
                        <span class="progress-label">Generate test plan (PICT)</span>
                        <span class="progress-status"></span>
                    </div>
                    <div class="progress-item" data-step="4">
                        <span class="progress-icon">&#9675;</span>
                        <span class="progress-label">Generate test script</span>
                        <span class="progress-status"></span>
                    </div>
                    <div class="progress-item" data-step="5">
                        <span class="progress-icon">&#9675;</span>
                        <span class="progress-label">Run tests</span>
                        <span class="progress-status"></span>
                    </div>
                </div>
            </section>

            <!-- Output Log -->
            <section id="outputSection" class="form-section hidden">
                <div class="section-header">
                    <h2>Output</h2>
                    <button type="button" id="clearLogBtn" class="btn-link">Clear</button>
                </div>
                <div id="outputLog" class="output-box"></div>
            </section>

            <!-- Test Case Summary -->
            <section id="testSummarySection" class="form-section hidden">
                <div class="section-header">
                    <h2>Test Case Summary</h2>
                </div>
                <div id="summaryOverview" class="summary-overview"></div>
                <div class="summary-table-wrap">
                    <table class="summary-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Test Case</th>
                                <th>Group</th>
                                <th>Action</th>
                                <th>Result</th>
                            </tr>
                        </thead>
                        <tbody id="summaryTableBody"></tbody>
                    </table>
                </div>
            </section>

            <!-- Results -->
            <section id="resultsSection" class="form-section hidden">
                <div class="section-header">
                    <h2>Results</h2>
                </div>
                <div class="results-grid">
                    <div class="result-card" id="manifestResult">
                        <h3>Manifest</h3>
                        <p class="result-path"></p>
                    </div>
                    <div class="result-card" id="datasetsResult">
                        <h3>Datasets</h3>
                        <p class="result-path"></p>
                    </div>
                    <div class="result-card" id="testDataResult">
                        <h3>Test Plan</h3>
                        <p class="result-path"></p>
                    </div>
                    <div class="result-card" id="testScriptResult">
                        <h3>Test Script</h3>
                        <p class="result-path"></p>
                    </div>
                </div>
            </section>

            <!-- Coverage Report -->
            <section id="coverageSection" class="form-section hidden">
                <div class="section-header">
                    <h2>Coverage Report</h2>
                </div>
                <div class="coverage-content">
                    <div class="coverage-summary">
                        <span class="coverage-icon">&#9733;</span>
                        <span id="coverageSummary">Coverage report generated successfully!</span>
                    </div>
                    <div class="coverage-actions">
                        <button type="button" id="viewCoverageBtn" class="btn-primary">
                            <span class="btn-icon">&#128196;</span>
                            <span class="btn-text">View Coverage Report</span>
                        </button>
                        <button type="button" id="openCoverageFolderBtn" class="btn-secondary">
                            <span class="btn-icon">&#128193;</span>
                            <span class="btn-text">Open Coverage Folder</span>
                        </button>
                    </div>
                    <p class="coverage-path">coverage/html/index.html</p>
                </div>
            </section>
        </main>

        <footer>
            <p>Powered by PICT (Pairwise Independent Combinatorial Testing)</p>
            <p class="version">v1.0.0</p>
        </footer>
    </div>

    <script src="main.js"></script>
</body>
</html>
